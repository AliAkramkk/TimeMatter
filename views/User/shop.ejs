<%- include('./partials/header.ejs') %>


    <div class="humberger__menu__overlay"></div>
    <div class="humberger__menu__wrapper">
        <div class="humberger__menu__logo">
            <a href="#"><img src="" alt=""></a>
        </div>
        <div class="humberger__menu__cart">
            <% if(!user) {%>



                <div class="header__top__right__auth">
                    <a onclick="login()"><i class="fa fa-user"></i> Login</a>
                </div>

                <% } else {%>


                    <ul>
                        <% if(wishlist!=null && wishlist.items.length!=0){%>
                            <li><a href="/wishlist"><i class="fa fa-heart"></i> <span id="wishlist-icon">
                                        <%= wishlist.items.length%>
                                    </span></a></li>
                            <%}else{%>
                                <li><a href="/wishlist"><i class="fa fa-heart"></i> <span>0</span></a>
                                </li>
                                <%}%>
                                    <li><a href="/cart"><i class="fa fa-shopping-bag"></i> <span id="cartCount">
                                                <%=cart.length%>
                                            </span></a></li>
                    </ul>

                    <div class="header__top__right__auth">
                        <a href="/profile"><i class="fa fa-user"></i>
                            <%= user.username %>
                        </a>
                    </div>

                    <div class="header__top__right__auth">
                        <a href="/logout" style="box-shadow: none;border: none;"
                            class="btn btn-sm btn-outline-danger">Logout</a>
                    </div>

                    <% } %>
                        <div class="header__top__right__auth">
                            <a class="navbar-brand text-dark fs-4 fw-bold" href="/" style="font-weight: 600;">Time<span
                                    class="text-danger" style="color: #dd2222;">Matter</span></a>

                        </div>

        </div>

        <nav class="humberger__menu__nav mobile-menu">
            <ul>
                <li class="active"><a href="/">Home</a></li>
                <li><a href="/shop">Shop</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </nav>
        <div id="mobile-menu-wrap"></div>

    </div>
    <!-- Humberger End -->

    <!-- Header Section Begin -->
    <header class="header">

        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="header__logo">
                        <a class="navbar-brand text-dark fs-4 fw-bold" href="/" style="font-weight: 700;">Time<span
                                class="text-danger" style="color: #dd2222;">Matter</span></a>


                    </div>
                </div>
                <div class="col-lg-6">
                    <nav class="header__menu">
                        <ul>
                            <li class="active"><a href="/">Home</a></li>
                            <li><a href="/shop">Shop</a></li>
                            <li><a href="/about">About</a></li>
                            <li><a href="/contact">Contact</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3">
                    <div class="header__cart header__menu">


                        <div class="header__top__right__auth">

                            <% if(!user) {%>



                                <div class="header__top__right__auth">
                                    <a onclick="login()"><i class="fa fa-user"></i> Login</a>
                                </div>

                                <% } else {%>


                                    <ul>
                                        <% if(wishlist!=null && wishlist.items.length!=0){%>
                                            <li><a href="/wishlist"><i class="fa fa-heart"></i> <span
                                                        id="wishlist-icon">
                                                        <%= wishlist.items.length%>
                                                    </span></a></li>
                                            <%}else{%>
                                                <li><a href="/wishlist"><i class="fa fa-heart"></i> <span>0</span></a>
                                                </li>
                                                <%}%>
                                                    <li><a href="/cart"><i class="fa fa-shopping-bag"></i> <span
                                                                id="cartCount">
                                                                <%=cart.length%>
                                                            </span></a></li>
                                    </ul>

                                    <div class="header__top__right__auth">
                                        <a href="/profile"><i class="fa fa-user"></i>
                                            <%= user.username %>
                                        </a>
                                    </div>

                                    <div class="header__top__right__auth">
                                        <a href="/logout" style="box-shadow: none;border: none;"
                                            class="btn btn-sm btn-outline-danger">Logout</a>
                                    </div>

                                    <% } %>
                        </div>

                    </div>
                </div>
            </div>

        </div>
        <div class="humberger__open">
            <i class="fa fa-bars"></i>
        </div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Product Section Begin -->
    <section class="product spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-5">
                    <div class="sidebar">
                        <div class="sidebar__item">
                            <h4>Categories</h4>
                            <ul>
                                <% categories.forEach((category)=>{ %>
                                    <li><a href="/category?catId=<%= category._id %>">
                                            <%= category.categoryName %>
                                        </a></li>
                                    <% }) %>
                            </ul>
                        </div>
                        <!-- <div class="sidebar__item">
                            <h4>Price</h4>
                            <div class="price-range-wrap">
                                <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                    data-min="10" data-max="540">
                                    <div class="ui-slider-range ui-corner-all ui-widget-header"></div>
                                    <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                    <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                </div>
                                <div class="range-slider">
                                    <div class="price-input">
                                        <input type="text" id="minamount">
                                        <input type="text" id="maxamount">
                                    </div>
                                </div>
                            </div>
                        </div>
                         -->


                    </div>
                </div>
                <div class="col-lg-9 col-md-7">

                    <div class="filter__item  justify-content-between align-items-center mb-3">
                        <div class="form-outline">
                            <!-- <form id="searchForm" action="/shop"  style="display: flex;">
                                <input type="search" name="search"  placeholder=         "Search products"
                                    style="border-radius: 5px; width: 26rem;">
                                <input type="submit" value="Search" class="btn btn-outline-success my-2 my-sm-0 mx-2">
                            </form> -->
                            <form class="d-flex nav-link text-light " role="search" action="/category">
                                <input class="form-control me-2" type="search" placeholder="search products"
                                    aria-label="Search" name="key">
                                <button class="btn btn-dark loginButton">Search</button>
                            </form>
                        </div>
                        <div class="row">


                            <!-- <div class="col-lg-4 col-md-4">
                                <div class="filter__found">
                                    <h6><span><%= products.length %></span> Products found</h6>
                                </div>
                            </div> -->
                            <div class="col-lg-4 col-md-3">

                            </div>
                        </div>
                    </div>
                    <div class="row" id="productGrid">
                        <% products.forEach((product)=>{ %>
                            <div class="col-lg-4 col-md-6 col-sm-6 ">
                                <div class="product__item">

                                    <div class="product_item_pic set-bg">
                                        <div class="product_icons">
                                            <ul class="shop__item__pic__hover">

                                                <li>
                                                    <!-- <a href="/shopDetails?id=<%= product._id %>"><i class="fa fa-info"></i>
                                            </a>  -->
                                                    <!-- <li><a href="#"><i class="fa fa-heart"></i></a></li> -->
                                                </li>

                                            </ul>
                                            <div class="product_itempic_hover image-fluid">
                                                <a href="/shopDetails?id=<%= product._id %>">
                                                    <img class="product_image" src="<%= product.image[0].url %>" alt="">
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="product_item_text" style="text-align: center;">
                                        <h6 style="font-weight: bold;">
                                            <%= product.productName %>
                                        </h6>
                                        <h5>&#8377;<%= product.price %>
                                        </h5>
                                    </div>
                                </div>
                            </div>
                            <% }) %>
                    </div>

                </div>
            </div>
        </div>
    </section>
    <!-- Product Section End -->

    <!-- pagination -->
    <nav aria-label="Page navigation example p-4">
        <ul class="pagination justify-content-center">
            <li class="page-item <% if(page==1){%>disabled <%}%> ">
                <a class="page-link" href="/shop?page=<%=page-1%>">Previous</a>
            </li>
            <% for(let i=1; i<=count;i++){%>
                <li class="page-item"><a class="page-link" href="/shop?page=<%=i%>">
                        <%=i%>
                    </a></li>
                <%}%>
                    <li class="page-item <% if(count ==page){%>disabled <%}%> ">
                        <a class="page-link" href="/shop?page=<%=page+1%>">Next</a>
                    </li>
        </ul>
    </nav><br>




    <!-- axios cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>

    <!-- sweet alert cdn -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function login() {
            const currentUrl = location.href;
            location.href = `/login?url=${currentUrl}`
        }
    </script>

    <%- include('./partials/footer.ejs') %>